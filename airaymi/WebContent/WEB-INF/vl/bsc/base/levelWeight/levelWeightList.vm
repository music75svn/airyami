#*************************************************************************
* CLASS 명      : levleWeightModify
* 작 업 자      : 안요한 
* 작 업 일      : 2013년 9월 3일 
* 기    능      : 난이도 가중치    
* ---------------------------- 변 경 이 력 --------------------------------
* 번호    작 업 자    작     업     일        변 경 내 용          비고
* ----  --------  -----------------  -------------------------  --------
*  1    안요한      2013년 9월 3일           최 초 작 업 
**************************************************************************# 

<script type="text/javascript" language="javascript">
//<![CDATA[

	var J = jQuery;

	J(document).ready(function(){
    
    /******************************************
	 * 숫자만 입력받기
	 ******************************************/
	J("input[name=conversionScores]").numeric({allow:".-"});
	J("input[name=conversionScores]").css("ime-mode", "disabled");
	
	/******************************************
	 * 저장버튼 이벤트
	 ******************************************/
	J("#btnInsert").click(function(e) {
		e.preventDefault();
		saveChk();
	});
    

	});		
	
	/******************************************
	 * 필수입력 체크
	 ******************************************/
	function saveChk() {
	
		J("input[name=conversionScores]", "#evalSectionArea").each(function(index, item) {
                if(J(item).val() == "") {
                    J.showMsgBox("환산점수를 입력해 주십시요", null, J('input[name=conversionScores]').eq(index));
                    saveChk = false;
                    return false;
                }
                if( isNaN(J(item).val())) {
                    J.showMsgBox("환산점수을 숫자만 입력 가능합니다.", null, J('input[name=conversionScores]').eq(index));
                    saveChk = false;
                    return false;
                }
        });
	
		J.showConfirmBox("저장하시겠습니까?", "saveDo"); //saveDo() 콜백함수 호출
	}
    
	/******************************************
	 * 저장
	 ******************************************/
	function saveDo() {
		
		J("#mode").val("ADD");
		J("#year").val(J("#findYear").val());
		J("#formList").attr("action", "$!{context_path}/bsc/base/levelWeight/levelWeightProcess.vw?type=template").submit();
	}
	
//]]>
</script>

<div id="Table">
	<div id="Table_blockContainer">
		
		<div class="tableTop">
			#parse("/WEB-INF/vl/common/template/tabs.vm")
			
			<!-- search S -->
			<form id="formFind" name="formFind" method="post" action="$!{context_path}/bsc/base/levelWeight/levelWeightList.vw?type=template">
			    <input type="hidden"	id="findHighPgmId"	name="findHighPgmId"	value="$!{searchMap.txt2html("findHighPgmId")}" />
				<input type="hidden" 	id="findSubPgmId"	name="findSubPgmId"		value="$!{searchMap.txt2html("findSubPgmId")}" />
				<input type="hidden"	id="findPgmId"		name="findPgmId"		value="$!{searchMap.txt2html("findPgmId")}" />
    			
                <div class="searchBox">
                <div><div><div>   
                    <table summary="검색조건">        
                        <caption class="none">검색조건</caption>
                        <thead><tr><th></th><th></th></tr></thead>
                        <tbody>
                            <tr>
								<td class="searchBox_tit w180">
                                    <span><label for="findYear">$!{YEAR}</label></span>
            						<span class="searchBar">
            							<select id="findYear" name="findYear" class="select w80">
            								$!CS_CODE.getCodeOption("017", $!{searchMap.txt2html("findYear")})
            							</select>
            						</span>
            					</td>
							</tr>
                        </tbody>
                    </table>
                    <input type="image" class="btnSearch" src="$!{img_path}/common/btn_search.gif" align="middle" alt="검색" /> 
                </div></div></div>
                </div>
			</form>
			<!-- search E -->
            <div class="clear"></div>
		</div>
		
			<form id="formList" name="formList" method="post" action="$!{context_path}/bsc/base/levelWeight/levelWeightProcess.vw?type=template">
				<input type="hidden" id="mode"			name="mode"		value="$!{searchMap.txt2html("mode")}" />
            	<input type="hidden" id="year"			name="year"		/>
				$!{searchMap.makeHiddenFind()}
				
				<div id="evalSectionArea" class="blockDetail2 non">
	    			<table summary="성과급 설정 등록">
						<caption class="none">성과급 설정 등록</caption>
	    				<tbody>
							<tr>
								<th scope="row"><label for="posGrade">평점(합)</label></th>
								#set($levelListSize = $!{CS_HTML.txt2html($levelList.size())})
								#if($levelListSize == 0)
									<td colspan = "5">난이도가중치구간대의 공통코드를 입력해주세요.</td>
								#end
								#foreach($list in $levelList)
								<td >
									<input type="hidden" name="evalSectionIds" class="inputbox w50" value='$!{CS_HTML.txt2html($list.CODE_ID)}' > 
									$!{CS_HTML.txt2html($list.CODE_NM)} 
									<input type="hidden" name="scores" class="inputbox w50" value='$!{CS_HTML.txt2html($list.CODE_NM)}' >
									<input type="hidden" name="fromValues" class="inputbox w50" value="$!{CS_HTML.txt2html($list.ETC1)}" />
									<input type="hidden" name="toValues" class="inputbox w50" value="$!{CS_HTML.txt2html($list.ETC2)}" /> 
								</td>
								#end
							</tr>
							<tr>
								<th scope="row"><label for="levelWeight">가중치</label></th>
								#set($evalSectionListSize = $!{CS_HTML.txt2html($evalSectionList.size())})
								#if($evalSectionListSize == 0)
									<td colspan = "5"></td>
								#end
								#foreach($list in $evalSectionList)
									
								<td >
									<input type="text" name="conversionScores" class="inputbox w50" value='$!{CS_HTML.txt2html($list.CONVERSION_SCORE)}' maxlength="5" style="text-align:right;padding-right:1px"/> 
								</td>
								#end
								</td>
							</tr>
	    				</tbody>
	    			</table>
	    		</div>
				
	    		<div class="blockButton"> 
	    			<ul>
	    				<li><input type="button" id="btnInsert" value="저장" /></li>
	    			</ul>
	    		</div>	
	    	<div class="clear"></div>
		</form>
	</div>	
</div>