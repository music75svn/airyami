<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="prs.bonus.bonSet">

	<!--
	==================================================================   
	  # 설명	: typeAlias 선언
	  #	기능	: SETTING
	  #	TABLE	: 
	==================================================================
	-->
	<typeAlias alias="hashMap" 			type="java.util.HashMap" />
	
	<!--
	==================================================================   
	  # 설명	: 성과급 설정 보기
	  #	기능	: SELECT
	  #	TABLE	: BON_SET
	==================================================================
	-->
	<select id="getList" parameterClass="hashMap" resultClass="hashMap">
		SELECT YEAR 
		     , STAND_PAY
		     , ORG_GRA_RATE
		     , GOV_EST
		     , DIS_STAND_PAY
		     , DIR_EXEC_RATE_CHF
		     , DIR_EXEC_RATE_DIR
		     , DIR_EXEC_RATE_AUD
		     , TO_CHAR(CONFIRM_DT,'YYYY.MM.DD HH24:MI:SS') CONFIRM_DT
  		  FROM BON_SET
  		  WHERE YEAR = #findYear#
	
	</select>
	
	<!--
	==================================================================   
	  # 설명	: 직위별등급 설정 보기
	  #	기능	: SELECT
	  #	TABLE	: BON_POS_GRA_SET
	==================================================================
	-->
	<select id="getGradeList" parameterClass="hashMap" resultClass="hashMap">
		SELECT 'CHF_RATE' AS DIV
		     , MAX (DECODE (GRADE, 'S', CHF_RATE)) AS S
		     , MAX (DECODE (GRADE, 'A', CHF_RATE)) AS A
		     , MAX (DECODE (GRADE, 'B', CHF_RATE)) AS B
		     , MAX (DECODE (GRADE, 'C', CHF_RATE)) AS C
		     , MAX (DECODE (GRADE, 'D', CHF_RATE)) AS D
		     , 1 SORTORDER
		  FROM BON_POS_GRA_SET
		 WHERE YEAR = #findYear#
	UNION
		SELECT 'MNG_RATE' AS DIV
		     , MAX (DECODE (GRADE, 'S', MNG_RATE)) AS S
		     , MAX (DECODE (GRADE, 'A', MNG_RATE)) AS A
		     , MAX (DECODE (GRADE, 'B', MNG_RATE)) AS B
		     , MAX (DECODE (GRADE, 'C', MNG_RATE)) AS C
		     , MAX (DECODE (GRADE, 'D', MNG_RATE)) AS D
		     , 2 SORTORDER
		  FROM BON_POS_GRA_SET
		 WHERE YEAR = #findYear#
	UNION
		SELECT 'EMP_RATE' AS DIV
		     , MAX (DECODE (GRADE, 'S', EMP_RATE)) AS S
		     , MAX (DECODE (GRADE, 'A', EMP_RATE)) AS A
		     , MAX (DECODE (GRADE, 'B', EMP_RATE)) AS B
		     , MAX (DECODE (GRADE, 'C', EMP_RATE)) AS C
		     , MAX (DECODE (GRADE, 'D', EMP_RATE)) AS D
		     , 3
		  FROM BON_POS_GRA_SET
	 WHERE YEAR = #findYear#
	 ORDER BY SORTORDER
	
	</select>
	
	 
	<!--
    ==================================================================
      # 설명  : 성과급 설정 등록
      
      # 기능  : INSERT
      # TABLE : BON_SET
    ==================================================================
    -->
	<insert id="insertData" parameterClass="hashMap">
		INSERT INTO BON_SET (
                   YEAR
                 , STAND_PAY
                 , ORG_GRA_RATE
                 , GOV_EST
                 , DIS_STAND_PAY
                 , DIR_EXEC_RATE_CHF
                 , DIR_EXEC_RATE_DIR
                 , DIR_EXEC_RATE_AUD
                 , CREATE_DT
		) VALUES (
	               #year#
	             , #standardPay#
	             , #organGradeRate#
	             , #standardPay# * #organGradeRate# / 100
	             , #disStandPay#
	             , #chiefRate#
	             , #directorRate#
	             , #auditorRate#
	             , SYSDATE
	    )
	</insert>
	
	<!--
    ==================================================================
      # 설명    : 성과급 삭제
      # 기능    : DELETE
      # TABLE   : BON_SET
    ==================================================================
    -->
    <delete id="deleteData" parameterClass="hashMap">
        DELETE FROM BON_SET
         WHERE YEAR				= #year#
		   
    </delete>
    
	<!--
    ==================================================================
      # 설명    : 직위별등급 삭제
      # 기능    : DELETE
      # TABLE   : BON_POS_GRA_SET
    ==================================================================
    -->
    <delete id="deleteGradeData" parameterClass="hashMap">
        DELETE FROM BON_POS_GRA_SET
         WHERE YEAR				= #year#
		   
    </delete>
    
    <!--
    ==================================================================
      # 설명  : 직위별등급 등록
      # 기능  : INSERT
      # TABLE : BON_POS_GRA_SET
    ==================================================================
    -->
	<insert id="insertGradeData" parameterClass="hashMap">
		INSERT INTO BON_POS_GRA_SET (
                   YEAR
                 , GRADE
                 , CHF_RATE
                 , MNG_RATE
                 , EMP_RATE
		) VALUES (
	               #year#
	             , #grade#
	             , #chfRate#
	             , #mngRate#
	             , #empRate#
	    )
	</insert>
	
</sqlMap>


