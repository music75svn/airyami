<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="prs.eval.evalSchedule">

	<!--
	==================================================================   
	  # 설명	: typeAlias 선언
	  #	기능	: SETTING
	  #	TABLE	: PRS_EVAL_USER
	==================================================================
	-->
	<typeAlias alias="hashMap" 			type="java.util.HashMap" />
	 

	<!--
	==================================================================   
	  # 설명	: 개인평가 평가일정 목록 보기
	  #	기능	: SELECT
	  #	TABLE	: PRS_EVAL_USER
	==================================================================
	-->
	<select id="getList" parameterClass="hashMap" resultClass="hashMap">
		SELECT YEAR
			   ,SUBSTR(DIR_EVAL_START_DT,0,4) || '.' || SUBSTR(DIR_EVAL_START_DT,5,2) || '.' || SUBSTR(DIR_EVAL_START_DT,7,2) AS DIR_EVAL_START_DT
		       ,SUBSTR(DIR_EVAL_END_DT,0,4) || '.' || SUBSTR(DIR_EVAL_END_DT,5,2) || '.' || SUBSTR(DIR_EVAL_END_DT,7,2) AS DIR_EVAL_END_DT
		       ,SUBSTR(DIR_RPT_START_DT,0,4) || '.' || SUBSTR(DIR_RPT_START_DT,5,2) || '.' || SUBSTR(DIR_RPT_START_DT,7,2) AS DIR_RPT_START_DT
		       ,SUBSTR(DIR_RPT_END_DT,0,4) || '.' || SUBSTR(DIR_RPT_END_DT,5,2) || '.' || SUBSTR(DIR_RPT_END_DT,7,2) AS DIR_RPT_END_DT
		       ,SUBSTR(MNG_START_DT,0,4) || '.' || SUBSTR(MNG_START_DT,5,2) || '.' || SUBSTR(MNG_START_DT,7,2) AS MNG_START_DT
		       ,SUBSTR(MNG_END_DT,0,4) || '.' || SUBSTR(MNG_END_DT,5,2) || '.' || SUBSTR(MNG_END_DT,7,2) AS MNG_END_DT
		       ,SUBSTR(MNG_ORG_START_DT,0,4) || '.' || SUBSTR(MNG_ORG_START_DT,5,2) || '.' || SUBSTR(MNG_ORG_START_DT,7,2) AS MNG_ORG_START_DT
		       ,SUBSTR(MNG_ORG_END_DT,0,4) || '.' || SUBSTR(MNG_ORG_END_DT,5,2) || '.' || SUBSTR(MNG_ORG_END_DT,7,2) AS MNG_ORG_END_DT
		       ,SUBSTR(MNG_RPT_START_DT,0,4) || '.' || SUBSTR(MNG_RPT_START_DT,5,2) || '.' || SUBSTR(MNG_RPT_START_DT,7,2) AS MNG_RPT_START_DT
		       ,SUBSTR(MNG_RPT_END_DT,0,4) || '.' || SUBSTR(MNG_RPT_END_DT,5,2) || '.' || SUBSTR(MNG_RPT_END_DT,7,2) AS MNG_RPT_END_DT
		       ,SUBSTR(MNG_OBJ_START_DT,0,4) || '.' || SUBSTR(MNG_OBJ_START_DT,5,2) || '.' || SUBSTR(MNG_OBJ_START_DT,7,2) AS MNG_OBJ_START_DT
		       ,SUBSTR(MNG_OBJ_END_DT,0,4) || '.' || SUBSTR(MNG_OBJ_END_DT,5,2) || '.' || SUBSTR(MNG_OBJ_END_DT,7,2) AS MNG_OBJ_END_DT
		       ,SUBSTR(EMP_START_DT,0,4) || '.' || SUBSTR(EMP_START_DT,5,2) || '.' || SUBSTR(EMP_START_DT,7,2) AS EMP_START_DT
		       ,SUBSTR(EMP_END_DT,0,4) || '.' || SUBSTR(EMP_END_DT,5,2) || '.' || SUBSTR(EMP_END_DT,7,2) AS EMP_END_DT
		       ,SUBSTR(MNG_PLAN_START_DT,0,4) || '.' || SUBSTR(MNG_PLAN_START_DT,5,2) || '.' || SUBSTR(MNG_PLAN_START_DT,7,2) AS MNG_PLAN_START_DT
               ,SUBSTR(MNG_PLAN_END_DT,0,4) || '.' || SUBSTR(MNG_PLAN_END_DT,5,2) || '.' || SUBSTR(MNG_PLAN_END_DT,7,2) AS MNG_PLAN_END_DT
			 , CREATE_DT
			 , MODIFY_DT
		 FROM PRS_EVAL_SCHEDULE
		WHERE YEAR = #findYear#
	</select>
	
	<!--
	==================================================================   
	  # 설명	: 평가일정 상세 보기
	  #	기능	: SELECT
	  #	TABLE	: 
	==================================================================
	-->
	<select id="getDetail" parameterClass="hashMap" resultClass="hashMap">
		SELECT YEAR
			 , DIR_EVAL_START_DT
			 , DIR_EVAL_END_DT
			 , DIR_RPT_START_DT
			 , DIR_RPT_END_DT
			 , MNG_START_DT
			 , MNG_END_DT
			 , MNG_ORG_START_DT
			 , MNG_ORG_END_DT
			 , MNG_RPT_START_DT
			 , MNG_RPT_END_DT
			 , MNG_OBJ_START_DT
			 , MNG_OBJ_END_DT
			 , EMP_START_DT
			 , EMP_END_DT
			 , MNG_PLAN_START_DT
		     , MNG_PLAN_END_DT
			 , CREATE_DT
			 , MODIFY_DT
		  FROM PRS_EVAL_SCHEDULE
		 WHERE 1 = 1 	  
		   AND YEAR = #year#
	</select>
	
	<!--
	==================================================================   
	  # 설명	: 평가일정 등록
	  #	기능	: INSERT
	  #	TABLE	: 
	==================================================================
	-->	
	<insert id="insertData" parameterClass="hashMap">
		
			INSERT INTO PRS_EVAL_SCHEDULE (
			               YEAR
						 , DIR_EVAL_START_DT
						 , DIR_EVAL_END_DT
						 , DIR_RPT_START_DT
						 , DIR_RPT_END_DT
						 , MNG_START_DT
						 , MNG_END_DT
						 , MNG_ORG_START_DT
						 , MNG_ORG_END_DT
						 , MNG_RPT_START_DT
						 , MNG_RPT_END_DT
						 , MNG_OBJ_START_DT
						 , MNG_OBJ_END_DT
						 , EMP_START_DT
						 , EMP_END_DT
						 , MNG_PLAN_START_DT
			   	 		 , MNG_PLAN_END_DT
						 , CREATE_DT
			          ) VALUES (
				          #year#
				        , #dirEvalStartDt#             
						, #dirEvalEndDt#               
						, #dirRptStartDt#              
						, #dirRptEndDt#                
						, #mngStartDt#                 
						, #mngEndDt#                   
						, #mngOrgStartDt#              
						, #mngOrgEndDt#                
						, #mngRptStartDt#
						, #mngRptEndDt#
						, #mngObjStartDt#
						, #mngObjEndDt#
						, #empStartDt#                 
						, #empEndDt#   
						, #mngPlanStartDt#    
						, #mngPlanEndDt#              
			          	, SYSDATE
			            )
	</insert>	
	
	<!--
	==================================================================   
	  # 설명	: 평가일정 수정
	  #	기능	: UPDATE
	  #	TABLE	: 
	==================================================================
	-->	
	<update id="updateData" parameterClass="hashMap">
			UPDATE PRS_EVAL_SCHEDULE
			   SET DIR_EVAL_START_DT = #dirEvalStartDt#
			     , DIR_EVAL_END_DT   = #dirEvalEndDt#  
			     , DIR_RPT_START_DT  = #dirRptStartDt# 
			     , DIR_RPT_END_DT    = #dirRptEndDt#   
			     , MNG_START_DT      = #mngStartDt#    
			     , MNG_END_DT        = #mngEndDt#      
			     , MNG_ORG_START_DT  = #mngOrgStartDt# 
			     , MNG_ORG_END_DT    = #mngOrgEndDt#   
			     , MNG_RPT_START_DT  = #mngRptStartDt# 
			     , MNG_RPT_END_DT    = #mngRptEndDt#   
			     , MNG_OBJ_START_DT  = #mngObjStartDt# 
			     , MNG_OBJ_END_DT    = #mngObjEndDt#
			     , EMP_START_DT      = #empStartDt#    
			   	 , EMP_END_DT        = #empEndDt#  
			   	 , MNG_PLAN_START_DT = #mngPlanStartDt#
			   	 , MNG_PLAN_END_DT   = #mngPlanEndDt#   
			     , MODIFY_DT         = SYSDATE
			 WHERE YEAR = #year#
	</update>	
	

	<!--
	==================================================================   
	  # 설명	: 평가일정 삭제
	  #	기능	: UPDATE
	  #	TABLE	: a
	==================================================================
	-->	
	<update id="deleteData" parameterClass="hashMap">
		DELETE FROM PRS_EVAL_SCHEDULE
		 WHERE 1 = 1 
		   AND YEAR = #year#  
	</update>	
	
	<!--
	==================================================================   
	  # 설명	: 평가일정 해당년도 일정입력체크
	  #	기능	: SELECT
	  #	TABLE	: 
	==================================================================
	-->
	<select id="getYearCheck" parameterClass="hashMap" resultClass="hashMap">
		SELECT COUNT(YEAR) YEAR_CNT
		  FROM PRS_EVAL_SCHEDULE
		 WHERE YEAR = #findYear#
	</select>
		
	
</sqlMap>


