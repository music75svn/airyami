#*************************************************************************
* CLASS 명      : targetMngDetailList
* 작 업 자      : 박경태
* 작 업 일      : 2012년 10월 30일 
* 기    능      : 목표관리
* ---------------------------- 변 경 이 력 --------------------------------
* 번호    작 업 자     작   업   일       변 경 내 용           비  고
* ----  --------  -----------------  -------------------------  -----------
*  1     박경태      2012년 10월 30일             최 초 작 업
**************************************************************************# 
#set($curr_url = $!{context_path} + "/str/tam/targetMng/targetMngDetailList.vw")
<script type="text/javascript" language="javascript" >
//<![CDATA[

	var J = jQuery;
	
	J(document).ready(function(){
	
    	J("#targetStatusId").val("$!{CS_HTML.txt2html($detail.TARGET_STATUS_ID)}");
		J("#cycleId").val("$!{CS_HTML.txt2html($detail.CYCLE_ID)}");
		
		if(J("#cycleId").val()!=""){
    		var arrM = new Array("1","2","3","4","5","6","7","8","9","10","11","12");
    		var arrQ = new Array("3","6","9","12");
    		var arrH = new Array("6","12");
    		var arrY = new Array("12");
    		var arrC = eval("arr"+J("#cycleId").val());
		}
		
		/******************************************
    	 * 실적입력 화면에서 disabled
    	 ******************************************/
		#if($!{CS_HTML.txt2html($detail.TARGET_STATUS_ID)} == "03" || $!{CS_HTML.txt2html($detail.TARGET_STATUS_ID)} == "04")  //승인요청, 승인완료일 경우 
			J("input[type=text]", "#blockDetailTB").attr("disabled", true);
			J("input[type=text]", "#blockDetailTB").addClass("readonly");
       	#else
			J("input[type=text]", "#blockDetailTB").attr("disabled", true);
			J("input[type=text]", "#blockDetailTB").addClass("readonly");
			
			if(J("#cycleId").val()!=""){
    			for (var i = 0; i < arrC.length; i++) {
    				J("input[name=colValues]", "#blockDetailTB").eq(arrC[i]-1).attr("disabled", false);
    				J("input[name=colValues]", "#blockDetailTB").eq(arrC[i]-1).removeClass("readonly");
    			}
			}
		#end
	
		/******************************************
    	 * 마감여부에 따른 disabled
    	 ******************************************/
		#if($!{targetInputTermYn} == 'N')
			J("input[type=text]", "#blockDetailTB").attr("disabled", true);
			J("input[type=text]", "#blockDetailTB").addClass("readonly");
		#end
		
		showReturnView(); //반려조회 버튼 설정
		
		/******************************************
    	 * 숫자만 입력받기
    	 ******************************************/
		/*
		J(":input[name=colValues]").numeric({allow:"."}); 			//숫자만 입력받기
		J(":input[name=colValues]").css("ime-mode", "disabled"); 	//한글사용 비활성화
		*/
		/******************************************
		 * 목표설정근거 byte 체크
		 ******************************************/
		J("#targetSetBase").checkbyte({
			indicator:J("#indicator"),
			limit:1000
		});
		J("#targetSetBase").trigger("keyup");
		
		#if($!{searchMap.txt2html("findActualType")} != "input")
			J("#targetSetBase").attr("readonly", true);
		#end
	});
	
	/******************************************
	 * 파일추가
	 ******************************************/
	var fileIndex = 0;
	
	function fileAttachAdd() {
		J("#fileAttach").append("<li id=\"fileRow" + fileIndex + "\"><input type=\"file\" name=\"file" + fileIndex + "\" class=\"input\" size=\"70\" /> <input type=\"button\" value=\"삭제\" onclick=\"deleteRow(" + fileIndex + ")\" class=\"input\" size=\"70\"></li>");
		fileIndex++;
	}
	
	function deleteRow(fileIndex)	{
    	J("#fileRow" + fileIndex).remove();
    }

//]]>
</script>

<div id="blockDetailTB" class="blockListTable">
	<table summary="목표입력">
    	<caption class="none">목표입력</caption>
    	<thead>
    		<tr>
    		    <th scope="col" width="4%" class="textCenter">구분</th>
    			<th scope="col" width="8%" class="textCenter">1월</th>
				<th scope="col" width="8%" class="textCenter">2월</th>
				<th scope="col" width="8%" class="textCenter">3월</th>
				<th scope="col" width="8%" class="textCenter">4월</th>
				<th scope="col" width="8%" class="textCenter">5월</th>
				<th scope="col" width="8%" class="textCenter">6월</th>
				<th scope="col" width="8%" class="textCenter">7월</th>
				<th scope="col" width="8%" class="textCenter">8월</th>
				<th scope="col" width="8%" class="textCenter">9월</th>
				<th scope="col" width="8%" class="textCenter">10월</th>
				<th scope="col" width="8%" class="textCenter">11월</th>
				<th scope="col" width="8%" class="textCenter">12월</th>
    		</tr>
    	</thead>
    	<tbody>
    		#foreach($list in $list)
    			<tr class="row1">
    				<td class="textCenter">목표</td>
                	<td class="textCenter">
						#if($!{searchMap.txt2html("findActualType")} == "input")
							<input type="hidden" name="mons" class="inputbox" value="01" />
							<input type="text" name="colValues" style="width:90%;" class="inputbox" value="$!{CS_HTML.txt2html($list.MON01)}" maxlength="15" />	
						#else
							$!{CS_HTML.txt2htmlTargetFormat($list.MON01)}	
						#end	
					</td>
					<td class="textCenter">
						#if($!{searchMap.txt2html("findActualType")} == "input")
							<input type="hidden" name="mons" class="inputbox" value="02" />
							<input type="text" name="colValues" style="width:90%;" class="inputbox" value="$!{CS_HTML.txt2html($list.MON02)}" maxlength="15" />	
						#else
							$!{CS_HTML.txt2htmlTargetFormat($list.MON02)}	
						#end	
					</td>
					<td class="textCenter">
						#if($!{searchMap.txt2html("findActualType")} == "input")
							<input type="hidden" name="mons" class="inputbox" value="03" />
							<input type="text" name="colValues" style="width:90%;" class="inputbox" value="$!{CS_HTML.txt2html($list.MON03)}" maxlength="15" />	
						#else
							$!{CS_HTML.txt2htmlTargetFormat($list.MON03)}	
						#end
					</td>
					<td class="textCenter">
						#if($!{searchMap.txt2html("findActualType")} == "input")
							<input type="hidden" name="mons" class="inputbox" value="04" />
							<input type="text" name="colValues" style="width:90%;" class="inputbox" value="$!{CS_HTML.txt2html($list.MON04)}" maxlength="15" />	
						#else
							$!{CS_HTML.txt2htmlTargetFormat($list.MON04)}	
						#end
					</td>
					<td class="textCenter">
						#if($!{searchMap.txt2html("findActualType")} == "input")
							<input type="hidden" name="mons" class="inputbox" value="05" />
							<input type="text" name="colValues" style="width:90%;" class="inputbox" value="$!{CS_HTML.txt2html($list.MON05)}" maxlength="15" />	
						#else
							$!{CS_HTML.txt2htmlTargetFormat($list.MON05)}	
						#end	
					</td>
					<td class="textCenter">
						#if($!{searchMap.txt2html("findActualType")} == "input")
							<input type="hidden" name="mons" class="inputbox" value="06" />
							<input type="text" name="colValues" style="width:90%;" class="inputbox" value="$!{CS_HTML.txt2html($list.MON06)}" maxlength="15" />	
						#else
							$!{CS_HTML.txt2htmlTargetFormat($list.MON06)}	
						#end
					</td>
					<td class="textCenter">
						#if($!{searchMap.txt2html("findActualType")} == "input")
							<input type="hidden" name="mons" class="inputbox" value="07" />
							<input type="text" name="colValues" style="width:90%;" class="inputbox" value="$!{CS_HTML.txt2html($list.MON07)}" maxlength="15" />	
						#else
							$!{CS_HTML.txt2htmlTargetFormat($list.MON07)}	
						#end	
					</td>
					<td class="textCenter">
						#if($!{searchMap.txt2html("findActualType")} == "input")
							<input type="hidden" name="mons" class="inputbox" value="08" />
							<input type="text" name="colValues" style="width:90%;" class="inputbox" value="$!{CS_HTML.txt2html($list.MON08)}" maxlength="15" />	
						#else
							$!{CS_HTML.txt2htmlTargetFormat($list.MON08)}	
						#end
					</td>
					<td class="textCenter">
						#if($!{searchMap.txt2html("findActualType")} == "input")
							<input type="hidden" name="mons" class="inputbox" value="09" />
							<input type="text" name="colValues" style="width:90%;" class="inputbox" value="$!{CS_HTML.txt2html($list.MON09)}" maxlength="15" />	
						#else
							$!{CS_HTML.txt2htmlTargetFormat($list.MON09)}	
						#end	
					</td>
					<td class="textCenter">
						#if($!{searchMap.txt2html("findActualType")} == "input")
							<input type="hidden" name="mons" class="inputbox" value="10" />
							<input type="text" name="colValues" style="width:90%;" class="inputbox" value="$!{CS_HTML.txt2html($list.MON10)}" maxlength="15" />	
						#else
							$!{CS_HTML.txt2htmlTargetFormat($list.MON10)}	
						#end		
					</td>
					<td class="textCenter">
						#if($!{searchMap.txt2html("findActualType")} == "input")
							<input type="hidden" name="mons" class="inputbox" value="11" />
							<input type="text" name="colValues" style="width:90%;" class="inputbox" value="$!{CS_HTML.txt2html($list.MON11)}" maxlength="15" />	
						#else
							$!{CS_HTML.txt2htmlTargetFormat($list.MON11)}	
						#end		
					</td>
					<td class="textCenter">
						#if($!{searchMap.txt2html("findActualType")} == "input")
							<input type="hidden" name="mons" class="inputbox" value="12" />
							<input type="text" name="colValues" style="width:90%;" class="inputbox" value="$!{CS_HTML.txt2html($list.MON12)}" maxlength="15" />	
						#else
							$!{CS_HTML.txt2htmlTargetFormat($list.MON12)}	
						#end		
					</td>
    			</tr>
			#end
		</tbody>
    </table>
	<br/>
	<table summary="목표입력">
    	<caption class="none">목표입력</caption>
		<tbody>
			<tr>
				<th width="25%">첨부파일</th>
				<td width="75%" class="textLeft">
					#foreach($fileList in $fileList)
						$!{CS_HTML.makeFileIconFileName($fileList.get("ATTACH_FILE_SUFFIX"), $fileList.get("ATTACH_FILE_NM"), $fileList.get("ATTACH_FILE_PATH"))} 
						&nbsp;&nbsp;
						
						#if($!{searchMap.txt2html("findActualType")} == "input")
    						#if($!{CS_HTML.txt2html($detail.TARGET_STATUS_ID)} == "01" || $!{CS_HTML.txt2html($detail.TARGET_STATUS_ID)} == "02") 
    							<input type="checkbox" name="delAttachFiles" id="delAttachFile$!{fileList.get("SEQ")}" value="$!{fileList.get("SEQ")}" />&nbsp;
    							<label for="delAttachFile$!{fileList.get("SEQ")}">첨부파일 삭제</label> <br/>
    						#end
						#end
							
					#end
					<br/>
					
					#if($!{searchMap.txt2html("findActualType")} == "input")
    					#if($!{CS_HTML.txt2html($detail.TARGET_STATUS_ID)} == "01" || $!{CS_HTML.txt2html($detail.TARGET_STATUS_ID)} == "02" || $!{CS_HTML.txt2html($detail.TARGET_STATUS_ID)} == "05")
    						<a href="javascript:fileAttachAdd();"><img src="$!{searchMap.txt2html("context")}/images/common/btn_file.gif" class="valign_middle" alt="파일추가" /></a>&nbsp;(첨부파일 용량제한은 100M입니다)<br/>
    					#end
					#end
					
					<div>
						<ul id="fileAttach">
						</ul>
					</div>
				</td>
			</tr>
			<tr>
				<th >목표설정근거</th>
				<td  class="textLeft">
					<textarea id="targetSetBase" name="targetSetBase" class="tabletext" title="목표설정근거" cols="" rows="5">$!{CS_HTML.txt2html($detail.TARGET_SET_BASE)}</textarea>
					<span id="indicator">0</span>/1000byte
				</td>
			</tr>
		</tbody>
	 </table>	
</div>
<div class="clear"></div>
