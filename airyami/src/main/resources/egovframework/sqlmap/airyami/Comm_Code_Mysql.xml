<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >

<sqlMap namespace="commcode">

<typeAlias alias="ValueMap" type="egovframework.airyami.cmm.util.ValueMap"/>
	
	<select id="commcode.listCommCodeCnt" parameterClass="Map" resultClass="java.lang.Integer">
	SELECT COUNT(1) 
	  FROM TB_CODE
	 WHERE USE_YN = 'Y' 
	 <isNotEmpty property="CODE_GROUP_ID">
	   AND CODE_GROUP_ID= #CODE_GROUP_ID# 
	 </isNotEmpty>
	</select>
	
	<select id="commcode.listCommCode" parameterClass="Map" resultClass="ValueMap" remapResults="true">
	<isEqual property="EXCEL_YN" compareValue="N">
	<include refid="pagingPrefixSQL"/>
	</isEqual>
	SELECT 
	       C.CODE_GROUP_NM
		  ,A.CODE_GROUP_ID
	      ,A.CODE_ID 		AS CD
	      ,B.CODE_NM 		AS CD_NM
	      ,A.REMARKS
	  FROM TB_CODE A
	      ,TB_CODE_NM B
	      ,TB_CODE_GROUP C
	 WHERE A.CODE_GROUP_ID = B.CODE_GROUP_ID
	   AND A.CODE_ID = B.CODE_ID
	   AND A.CODE_GROUP_ID = C.CODE_GROUP_ID
	   AND A.USE_YN = 'Y'
	   AND B.LANG_CD = #LANG_CD# 
	 <isNotEmpty property="CODE_GROUP_ID">
	   AND A.CODE_GROUP_ID= #CODE_GROUP_ID# 
	 </isNotEmpty>
	 <isNotEmpty property="SORT_COL">
	 	<include refid="orderbySQL"/>
	 </isNotEmpty>
	 <isEmpty property="SORT_COL">
	 ORDER BY A.CODE_GROUP_ID, A.SORT_ORDER
	 </isEmpty>
	<isEqual property="EXCEL_YN" compareValue="N">
	<include refid="pagingSuffixSQL"/>
	</isEqual>
	</select>
	
	<select id="commcode.selectCommCode" parameterClass="Map" resultClass="ValueMap">
	SELECT /* Comm_Code_Mysql.xml  commcode.selectCommCode */
	       A.CODE_ID AS CD
	      ,B.CODE_NM AS CD_NM
	  FROM TB_CODE A
	      ,TB_CODE_NM B
	 WHERE A.CODE_GROUP_ID = B.CODE_GROUP_ID
	   AND A.CODE_ID = B.CODE_ID
	   AND A.USE_YN = 'Y'
	   AND A.CODE_GROUP_ID = #CODE_GROUP_ID#
	   AND B.LANG_CD = #LANG_CD#
	  ORDER BY A.SORT_ORDER
	</select>
	
	<!-- 코드 목록 -->
	<select id="commcode.getCommcodeCombo" parameterClass="Map" resultClass="ValueMap" remapResults="true">
	SELECT 
	      CODE			AS CD
	      ,CODE_NAME	AS CD_NM
	  FROM TB_CODE A
	 WHERE USE_YN = 'Y' 
	   AND CODE_GROUP_ID = #CODE_GROUP_ID#	
	 <isNotEmpty property="UPPER_CODE" prepend="AND"><![CDATA[ UPPER_CODE = #UPPER_CODE# ]]> </isNotEmpty>
	ORDER BY PRINT_ORDER
	</select>
	
	<select id="commcode.getCommCode" parameterClass="Map" resultClass="ValueMap">
	SELECT CODE_GROUP_ID
	      ,CODE			AS CD
	      ,CODE_NAME	AS CD_NM
	      ,CODE_DESC
	      ,ETC 
	      ,CODE			AS CD1
	      ,'/template/template_list.do'		AS CD1_URL
	      ,1			AS ARTICLE_SEQ
	  FROM TB_CODE
	 WHERE USE_YN = 'Y' 
	   AND CODE_GROUP_ID= #CODE_GROUP_ID# 
	   AND CODE= #CODE# 
	</select>
	
	
</sqlMap>