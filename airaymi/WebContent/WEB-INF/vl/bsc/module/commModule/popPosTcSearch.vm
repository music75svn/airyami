#*************************************************************************
* CLASS 명      : popPosTcSearch.vm
* 작 업 자      : 박종호
* 작 업 일      : 2013.05.31
* 기    능      : 직위 검색
* ---------------------------- 변 경 이 력 --------------------------------
* 번호   작 업 자     작   업   일        변 경 내 용             비고
* ----  --------  -----------------  -------------------------  --------
*  1     박 종 호      2013.05.31          최 초 작 업 
**************************************************************************# 

<script type="text/javascript" language="javascript" >
//<![CDATA[

	var J = jQuery;
	
	J(document).ready(function(){
	
		/******************************************
		 * 데이터 그리드 출력
		 ******************************************/
		var str = J('#formFindPop').serialize();
		
		jQuery("#posTcList").jqGrid({
			url          :"$!{searchMap.txt2html("context")}/bsc/module/commModule/posTcList_xml.vw" + "?" + str,
			mtype        :"POST",
			datatype     :"json",
			jsonReader   : {   
    						page   : "page",
    						total  : "total",
    						root   : "rows", 
    						records: function(obj){return obj.length;},
    						repeatitems: false, 
    						id     : "id"
    				       },
			height       : 340,
			colNames     :['직위코드','직위명','직위명'],
			colModel     :[							
							{name:'POS_TC'   	,index:'POS_TC'  		,width:100   ,align:'left'  },
							{name:'POS_TC_NM'   ,index:'POS_TC_NM'  	,width:100   ,align:'left'  },
							{name:'POS_TC_NAME' ,index:'POS_TC_NAME'  	,width:300   ,align:'left'  ,formatter:linkUpdate }
							],
			rowNum       : 100000,
			autowidth    : false,
			viewrecords  : true,
			loadonce     : false,
			cellEdit     : true,			
		}).jqGrid('hideCol', "POS_TC").jqGrid('hideCol', "POS_TC_NM").setGridWidth($!{jqGrid_r_width});
     		
	});
	
	/******************************************
	 * jqGrid 수정페이지 링크
	 ******************************************/
	function linkUpdate(cellvalue, options, rowObject) { 
		return '<a href=javascript:setPosTcSet(' + options.rowId + ')>' + getPosName(rowObject.POS_TC, cellvalue) + '<//a>';
	}
	
	/******************************************
	 * setting
	 ******************************************/
	function setPosTcSet(rowId) {
		var ret = J("#posTcList").jqGrid('getRowData',rowId);
		var posTc = ret.POS_TC;
		var posTcNm = ret.POS_TC_NM;
		setUserInfoPop(posTc, getPosName(posTc, posTcNm)); 
	}	
	
	function getPosName(posTc, posNm) {
		var str = "";
		
		if (posTc.substr(0, 1) == "0")
			str = "[임원] " + posNm;
		else 
			str = "[" + posTc.substr(0, 1) + "급] " + posNm;
			
		return str;
	}

//]]>
</script>

<form id="formFindPop" name="formFindPop" method="post" action="$!{searchMap.txt2html("context")}/bsc/module/commModule/popPosTcSearch.vw">
	<input type="hidden" id="findYear" name="findYear" value="$!{searchMap.txt2html("findYear")}" />
	
    <div style="height:380px;width:310px;">
    	<div id="popPosTcArea">
    		<h1 class="none">직위</h1>
    		<div id="userData" style="margin-left:15px;">
    			<!-- 데이터그리드 Start -->
    			<div class="blockGridListTable">
    				<table id="posTcList" summary="직위 조회">
    					<caption class="none">직위 조회</caption>
    					<thead><tr><th></th></tr></thead>
    					<tbody><tr><td></td></tr></tbody>
    				</table>
    				<div id="pager"></div>                    
    			</div>
    			<!--// 데이터그리드 End -->	
    		</div>
    	</div>
    </div>
</form>
