<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="bsc.system.supplyFacilitiesRate">

	<!--
	==================================================================
	  # 설명	: typeAlias 선언
	  #	기능	: SETTING
	  #	TABLE	:
	==================================================================
	-->
	<typeAlias alias="hashMap" 			type="java.util.HashMap" />


	<!--
	==================================================================
	  # 설명	: 시스템항목관리 목록 보기
	  #	기능	: SELECT
	  #	TABLE	: BSC_SYSTEM_ITEM
	==================================================================
	-->
	<select id="getList" parameterClass="hashMap" resultClass="hashMap">
		SELECT A.YEAR
            , A.DEPT_CD
            , B.DEPT_NM
            , A.EQUI_NM
            , A.ADDR
            , A.INSP_PLAN_DATE
            , A.REAL_INSP_DATE
		FROM
			(SELECT YEAR
            		, DEPT_CD
            		, EQUI_NM
            		, ADDR
            		, INSP_PLAN_DATE
            		, REAL_INSP_DATE
            FROM V_GHF0301M_001
			UNION
			SELECT YY
            	, BR_CD
            	, EQUI_NM
            	, ADDR
            	, INSP_PLAN_DATE
            	, REAL_INSP_DATE
        	FROM V_GHF0311M_001) A
		LEFT OUTER JOIN BSC_DEPTINFO B
			ON A.DEPT_CD = B.DEPT_ID
		WHERE A.DEPT_CD = #findDeptId#
		AND A.YEAR = #findYear#
		ORDER BY B.DEPT_NM ASC
	</select>

	<!--
	==================================================================
	  # 설명	: 연계테스트 부서 가져오기
	  #	기능	: SELECT
	  #	TABLE	: BSC_SYSTEM_ITEM
	==================================================================
	-->
	<select id="getDeptList" parameterClass="hashMap" resultClass="hashMap">
		SELECT DEPT_ID, DEPT_NM
		FROM BSC_DEPTINFO A
			INNER JOIN V_GHF0221D_001 B
				ON A.DEPT_ID = B.BR_CD
		WHERE
			B.SUMM_YY = #findYear#
		AND OULEVEL IN ('1', '2')
		AND B.ROLE_TC = '31'
		AND DEPT_ID NOT IN ('1400', '5100')
		GROUP BY DEPT_NM, DEPT_ID
		ORDER BY DEPT_NM ASC
	</select>



</sqlMap>


