<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="bsc.base.deptStrategyDiagMng">

	<!--
	==================================================================   
	  # 설명	: typeAlias 선언
	  #	기능	: SETTING
	  #	TABLE	: 
	==================================================================
	-->
	<typeAlias alias="hashMap" 			type="java.util.HashMap" />
	 

	<!--
	==================================================================   
	  # 설명	: 전략체계도관리 목록 보기
	  #	기능	: SELECT
	  #	TABLE	: 
	==================================================================
	-->
	<select id="getList" parameterClass="hashMap" resultClass="hashMap">
		  SELECT A.STRATEGY_ID,
		         A.STRATEGY_NM,
		         B.KIND,
		         B.X1,
		         B.Y1,
		         C.STATUS
		    FROM BSC_STRATEGY A 
		         LEFT OUTER JOIN BSC_STRATEGYMAP B 
		         ON A.YEAR = B.YEAR
		         AND B.SC_DEPT_ID = #findScDeptId#
		         AND A.STRATEGY_ID = B.STRATEGY_ID
		         LEFT OUTER JOIN BSC_STRATEGYSCORE C 
		         ON A.YEAR = C.YEAR
		         AND C.MON = #findMon#
		         AND C.ANAL_CYCLE = #findAnalCycle#
				 AND C.SC_DEPT_ID = #findScDeptId#
				 AND A.STRATEGY_ID = C.STRATEGY_ID 
		   WHERE A.YEAR = #findYear#
		     AND A.DELETE_DT IS NULL
		ORDER BY A.STRATEGY_ID
	</select>
	
	<!--
	==================================================================   
	  # 설명	: 전략체계도관리 화살표 목록 보기
	  #	기능	: SELECT
	  #	TABLE	: 
	==================================================================
	-->
	<select id="getArrowList" parameterClass="hashMap" resultClass="hashMap">
		SELECT   A.STRATEGY_ID
		       , A.X1
		       , A.Y1
		       , A.X2
		       , A.Y2
		       , A.X3
		       , A.Y3
		       , A.X4
		       
		       , A.Y4
		    FROM BSC_STRATEGYMAP A
		   WHERE A.YEAR = #findYear#
		     AND A.SC_DEPT_ID = #findScDeptId#
		     AND A.STRATEGY_ID LIKE 'C%'
		ORDER BY A.STRATEGY_ID

	</select>
	
	<!--
	==================================================================   
	  # 설명	: 전략체계도관리 지표 목록 보기
	  #	기능	: SELECT
	  #	TABLE	: 
	==================================================================
	-->
	<select id="getMetricList" parameterClass="hashMap" resultClass="hashMap">
		SELECT A.YEAR,
		       B.STRATEGY_ID,
		       B.STRATEGY_NM,
		       A.METRIC_ID,
		       A.METRIC_NM,
		       C.STATUS
		  FROM BSC_METRIC A 
		       INNER JOIN BSC_STRATEGY B 
		       ON A.YEAR = B.YEAR
		       AND A.STRATEGY_ID = B.STRATEGY_ID
		       AND B.DELETE_DT IS NULL
		       LEFT OUTER JOIN BSC_METRICSCORE C 
		       ON A.YEAR = C.YEAR
		       AND A.SC_DEPT_ID = C.SC_DEPT_ID
		       AND A.METRIC_ID = C.METRIC_ID
		       AND C.MON = #findMon#
		       AND C.ANAL_CYCLE = #findAnalCycle#
		 WHERE A.YEAR = #findYear#
		   AND A.SC_DEPT_ID = #findScDeptId#
		   AND A.DELETE_DT IS NULL                               

	</select>
	
	<!--
	==================================================================   
	  # 설명	: 전략체계도관리 상세 보기
	  #	기능	: SELECT
	  #	TABLE	: 
	==================================================================
	-->
	<select id="getDetail" parameterClass="hashMap" resultClass="hashMap">
           
	</select>
	
	<!--
	==================================================================   
	  # 설명	: 전략체계도관리 등록
	  #	기능	: INSERT
	  #	TABLE	: 
	==================================================================
	-->	
	<insert id="insertData" parameterClass="hashMap">
		INSERT INTO BSC_STRATEGYMAP
		     VALUES (#findYear#
		           , #strategyId#
		           , #findScDeptId#
		           , #kind#
		           , #x1Pos#
		           , #y1Pos#
		           , #x2Pos#
		           , #y2Pos#
		           , #x3Pos#
		           , #y3Pos#
		           , #x4Pos#
		           , #y4Pos#
		           , SYSDATE
		            )
	</insert>	
	
	<!--
	==================================================================   
	  # 설명	: 전략체계도관리 수정
	  #	기능	: UPDATE
	  #	TABLE	: 
	==================================================================
	-->	
	<update id="updateData" parameterClass="hashMap">
		
	</update>	
	
	<!--
	==================================================================   
	  # 설명	: 전략체계도관리 삭제
	  #	기능	: UPDATE
	  #	TABLE	: 
	==================================================================
	-->	
	<update id="deleteData" parameterClass="hashMap">
		DELETE FROM BSC_STRATEGYMAP
		      WHERE YEAR = #findYear#
		        AND SC_DEPT_ID = #findScDeptId#
	</update>
	
	
</sqlMap>


