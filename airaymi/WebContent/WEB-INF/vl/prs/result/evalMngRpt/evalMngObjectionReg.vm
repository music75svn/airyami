#*************************************************************************
* CLASS 명     : evalMngObjectionReg
* 작 업 자      : 박선혜 
* 작 업 일      : 2013년 6월 19일 
* 기    능      : 이의제기 신청서    
* ---------------------------- 변 경 이 력 --------------------------------
* 번호    작 업 자    작     업     일        변 경 내 용          비고
* ----  --------  -----------------  -------------------------  --------
*  1    박선혜      2013년 6월 19일           최 초 작 업 
**************************************************************************# 

<script type="text/javascript" language="javascript">
//<![CDATA[

	var J = jQuery;

	J(document).ready(function(){
    
		/******************************************
		 * 저장버튼 이벤트
		 ******************************************/
		J("#btnInsert").click(function(e) {
			e.preventDefault();
			saveChk();
		});
	
		/******************************************
		 * 저장버튼 이중 클릭 방지
		 ******************************************/
		J("form1").submit(function(){
			J("#btnInsert").unbind();
		});
		
		/******************************************
		 * 취소버튼 (돌아가기)
		 ******************************************/
		J("#btnBack").click(function() {
			J("#form1").attr("action", "$!{context_path}/prs/result/evalMngRpt/evalMngRptList.vw?type=template").submit();
		});
        
		/******************************************
		 * 조회
		 ******************************************/
		J("#formFind").submit(function(event) {
			
		});
		
		/******************************************
		 * 세부내용 byte 체크
		 ******************************************/
		J("#objContent").checkbyte({
			indicator:J("#objContentIndicator"),
			limit:2000
		});
		J("#objContent").trigger("keyup");
		
		/******************************************
		 * 화면 초기셋팅
		 ******************************************/
		init();
	});
	
	
	/******************************************
	 * 필수입력 체크
	 ******************************************/
	function saveChk() {
    	var checked = false;
		
		if (J("input[name='objType']:checked").length == 0) {
			alert("이의제기항목을 선택해 주십시요.");
			return;
		}
	
        if( !LengthCheck(J("#objContent").val(), "이의제기 세부내용", 0, 2000 ) ) {
            J("#objContent").focus();
            return;
        }
		
		J.showConfirmBox("저장하시겠습니까?", "saveDo"); //saveDo() 콜백함수 호출
	}
    
	/******************************************
	 * 저장
	 ******************************************/
	function saveDo() {
		var objTypes= "";
		J("input[name=objType]:checked").each(function() {
			objTypes += $(this).val() + '|';
		});
		
		J("#objTypes").val(objTypes);
		
		J("#form1 input").attr("disabled",false);
		J("#form1 select").attr("disabled",false);
		J("#form1 checkbox").attr("disabled",false);
		J("#form1 textarea").attr("disabled",false);
		
		J("#form1").attr("action", "$!{context_path}/prs/result/evalMngRpt/evalMngObjextionRegProcess.vw?type=template").submit();
	}	
	
	/*****************************************************
	 * 화면초기셋팅
	 *****************************************************/ 
    function init() {
		if("$!{CS_HTML.txt2html($detail.OBJ_ANSWER_DT)}" != "") 
		{
			//신청버튼 hidden
			J("#btnInsert").hide();
			
			//checkbox, textarea
        	J("input:checkbox, textarea").attr("disabled", true);
		}
	}

//]]>
</script>

<div id="Table">
	<div id="Table_blockContainer">
		
		<div class="tableTop">
			#parse("/WEB-INF/vl/common/template/tabs.vm")
			
			<!-- search S -->
			<form id="formFind" name="formFind" method="post" action="$!{context_path}/prs/result/evalMngRpt/evalMngRptList.vw?type=template">
				<input type="hidden"	id="findHighPgmId"	name="findHighPgmId"	value="$!{searchMap.txt2html("findHighPgmId")}" />
				<input type="hidden" 	id="findSubPgmId"	name="findSubPgmId"		value="$!{searchMap.txt2html("findSubPgmId")}" />
				<input type="hidden"	id="findPgmId"		name="findPgmId"		value="$!{searchMap.txt2html("findPgmId")}" />
				
				<div class="searchBox" id="searchDiv" style="display:none">
    				<div><div><div>
    				<table summary="평가대상자 검색 조건">
						<caption class="none">평가대상자 검색 조건</caption> 
						<thead><tr><th></th></tr></thead>
        				<tbody>
            				<tr>
								<td class="searchBox_tit w200">
            						<span>$!{YEAR}</span>
            						<span class="searchBar">
            							<select id="findYear" name="findYear" class="select w80">
            								$!CS_CODE.getCodeOption("017", $!{searchMap.txt2html("findYear")})
            							</select>
            						</span>
            					</td>
            					<td>
            					<td class="searchBox_tit w250">
    								
    								<input type="radio" id="findCastTc1" name="findCastTc" onchange="reNew();" value="" $!{CS_HTML.getChecked($!{searchMap.txt2html("findCastTc")}, '')} /> 전체 &nbsp;
    								<input type="radio" id="findCastTc2" name="findCastTc" onchange="reNew();" value="10" $!{CS_HTML.getChecked($!{searchMap.txt2html("findCastTc")}, '10')} /> 1급 &nbsp;
    								<input type="radio" id="findCastTc3" name="findCastTc" onchange="reNew();" value="20" $!{CS_HTML.getChecked($!{searchMap.txt2html("findCastTc")}, '20')} /> 2급 &nbsp;
    								<input type="radio" id="findCastTc4" name="findCastTc" onchange="reNew();" value="30" $!{CS_HTML.getChecked($!{searchMap.txt2html("findCastTc")}, '30')} /> 3급 &nbsp;
    							</td>
								<td class="searchBox_tit w200">
            						<span><label for="findKorNm">이름 </label></span>
										<input type="text" title="이름" name="findKorNm" id="findKorNm" value="$!{searchMap.txt2html("findKorNm")}" maxlength="10" class="inputbox w100"/>
            						</span>
            					</td>
            				</tr>
        				</tbody>
    				</table>
                    <input type="image" class="btnSearch" src="$!{img_path}/common/btn_search.gif" align="middle" alt="검색" /> 
                    </div></div></div>
    	        </div>
    		</form>
    		<!-- search E -->
			<div class="clear"></div>
		</div>
		<div id="mainContent">
    		<form id="form1" name="form1" method="post" action="$!{context_path}/prs/org/orgEvalItem/orgEvalItemProcess.vw?type=template">
                <input type="hidden" id="mode"				name="mode"					value="$!{searchMap.txt2html("mode")}" />
            	<input type="hidden" id="year"				name="year"					value="$!{searchMap.txt2html("year")}" />
            	<input type="hidden" id="empn"				name="empn"					value="$!{searchMap.txt2html("empn")}" />
            	<input type="hidden" id="castTc"			name="castTc"				value="$!{searchMap.txt2html("castTc")}" />
                <input type="hidden" id="evalGrpId"        name="evalGrpId"           value="$!{searchMap.txt2html("evalGrpId")}" />
            	<input type="hidden" id="deptCd"			name="deptCd"				value="$!{searchMap.txt2html("deptCd")}" />
            	<input type="hidden" id="objTypes"			name="objTypes"				value="$!{searchMap.txt2html("castTc")}" />
				$!{searchMap.makeHiddenFind()}
            	<div id="rptTitle" class="rptTitleTable">
					<table width="100%" style="height:23px" border="0" cellpadding="0" cellspacing="0">
            			<tr>
                			<th>
                				이의제기 신청서
                            </th>
            			</tr>
                    </table>
				</div>				
    			<div>
    				<table width="100%" style="height:23px" border="0" cellpadding="0" cellspacing="0">
            			<tr>
                			<td class="bodybox_deptTit" style="width:1050px;border-bottom:1px solid #e3e3e3; padding:0px 0px 0px 30px;">
                				<span id="basicTitle" style='cursor:hand;overflow:hidden;text-overflow:ellipsis;width:140;'>인적사항</span>
                            </td>
            			</tr>
                    </table>
                </div>
				<div id="basicDetailArea" class="blockDetail2">
        			<table summary="인적사항">
    					<caption class="none">인적사항</caption>
        				<colgroup>
        					<col width="25%" />
        					<col width="25%" />
    						<col width="25%" />
    						<col width="25%" />
        				</colgroup>
        				<tbody>
        					<tr id="basicDetail">
        						<th scope="row">사번</th>
        						<th scope="row">성명</th>
    							<th scope="row">소속</th>
    							<th scope="row">직급</th>
        					</tr>
    						<tr>
        						<td>
									$!{CS_HTML.txt2html($basic.EMPN)}
								</td>
        						<td>
									$!{CS_HTML.txt2html($basic.KOR_NM)}
								</td>
    							<td>
									$!{CS_HTML.txt2html($basic.DEPT_FULL_NM)}
								</td>
    							<td>
									$!{CS_HTML.txt2html($basic.CAST_TC_NM)}
								</td>
        					</tr>
        				</tbody>
        			</table>
        		</div>
          		<div id="objDetailArea" class="blockDetail2">
        			<table summary="이의제기 세부내역">
    					<caption class="none">이의제기 세부내역</caption>
        				<colgroup>
        					<col width="20%" />
							#foreach($list in $objList)
								<col width="20%" />
							#end
        				</colgroup>
        				<tbody>
        					<tr id="obgDetail">
        						<th scope="row">이의제기항목</th>
								<td colspan=$objList.size() style='text-align:left;'>
									$!CS_CODE.getCodeCheckBox("objType", "185", $!{detailList}, $!{searchMap.txt2html("year")})
								</td>
        					</tr>
        					<tr id="basicDetail">
        						<th scope="row" >이의제기<br/>세부내용</th>
        						<td scope="row" colspan=$objList.size() style='text-align:left;'>
								    <textarea id="objContent" name="objContent" class="tabletext" title="이의제기 세부내용" cols="10" rows="13">$!{CS_HTML.txt2html($detail.OBJ_CONTENT)}</textarea>
									<span id="objContentIndicator">0</span>/2000byte	
								</td> 
        					</tr>	
        					</tr>							
        				</tbody>
        			</table>
        		</div>
				<div class="filedown">
					<ul>
						<li>$!{CS_FORMAT.dateFormat($detail.OBJ_DT)}&nbsp;</li>
					</ul>
                </div>				
				<div class="blockButton_all floatLeft">
            		<div class="blockButton">
            			<ul>
            				<li><input type="button" id="btnBack"   value="돌아가기"/></li>  
						#if ("T" == "$!{objectionSchedule.OBJECTION_YN}")
							#if( ( $!{searchMap.txt2html("empn")} == $!{searchMap.txt2html("chkUserId")} ) || $!{CS_LOGIN.chkAuthGrp("01")} == true )
            					<li><input type="button" id="btnInsert" value="신청하기"/></li>
            				#end
						#end
            			</ul>
            		</div>	
				</div>
    			
    		</form>	
		</div>	
	</div>
	<div class="clear"></div>
</div>


