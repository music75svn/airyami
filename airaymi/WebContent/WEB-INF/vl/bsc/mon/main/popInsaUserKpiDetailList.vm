#*************************************************************************
* CLASS 명      : popInsaUserKpiDetailList.vm
* 작 업 자      : 하윤식
* 작 업 일      : 2012.11.27
* 기    능      : 개인 인사 KPI 실적 조회
* ---------------------------- 변 경 이 력 --------------------------------
* 번호   작 업 자     작   업   일        변 경 내 용             비고
* ----  --------  -----------------  -------------------------  --------
*  1     하 윤 식      2012.11.27          최 초 작 업 
**************************************************************************# 

<script type="text/javascript" language="javascript" >
//<![CDATA[

	var J = jQuery;
	
	J(document).ready(function(){
	
		/******************************************
		 * 데이터 그리드 출력
		 ******************************************/
		var str = J('#formFindPop').serialize();
		
		jQuery("#popList").jqGrid({
			url          :"$!{searchMap.txt2html("context")}/bsc/mon/main/insaUserKpiDetailList_xml.vw" + "?" + str,
			mtype        :"POST",
			datatype     :"json",
			jsonReader   : {   
    						page   : "page",
    						total  : "total",
    						root   : "rows", 
    						records: function(obj){return obj.length;},
    						repeatitems: false, 
    						id     : "id"
    				       },
			height       : 320,
			colNames     :['평가회차ID', '사번', '성명', '업적목표 코드', '세부추진계획코드', '세부추진계획', '세부추진실적', '시작월', '종료월', '달성율(%)'],
			colModel     :[
							{name:'EVU_STD_ID'    ,index:'EVU_STD_ID'         ,width:100    ,align:'center' },
							{name:'EMP_ID'        ,index:'EMP_ID'             ,width:100    ,align:'left'   },
							{name:'EMP_NM'        ,index:'EMP_NM'             ,width:100    ,align:'center' },
							{name:'ITEM_NO'       ,index:'ITEM_NO'            ,width:100    ,align:'center' },
							{name:'SEQ_NO'        ,index:'SEQ_NO'             ,width:100    ,align:'right'  },
							{name:'DTL_PLAN_TXT'  ,index:'DTL_PLAN_TXT'       ,width:250    ,align:'left'   ,formatter:setNormalFont },
							{name:'RSLT_TXT'      ,index:'RSLT_TXT'           ,width:250    ,align:'left'   ,formatter:setNormalFont },
							{name:'STA_YM'        ,index:'STA_YM'             ,width:70     ,align:'center' },
							{name:'END_YM'        ,index:'END_YM'             ,width:70     ,align:'center' },
							{name:'ACHV_RATE'     ,index:'ACHV_RATE'          ,width:70     ,align:'center' }
						   ],
			rowNum       : 100000,
			autowidth    : false,
			viewrecords  : true,
			loadonce     : false,
			cellEdit     : true,
			caption:"조회"
		}).jqGrid('hideCol',"EVU_STD_ID").jqGrid('hideCol',"EMP_ID").jqGrid('hideCol',"EMP_NM").jqGrid('hideCol',"ITEM_NO").jqGrid('hideCol',"SEQ_NO").setGridWidth(830);
	});
	
	function setNormalFont(cellvalue) { 
		return "<div class='normal'>" + cellvalue + "</div>";
	}
	
	$("#formFindPop").submit(function() { 
		J("#kpiPoolList").setGridParam({url:"$!{searchMap.txt2html("context")}/bsc/mon/main/popInsaUserKpiDetailList.vw?"+J("#formFindPop").serialize()}); 
		J("#kpiPoolList").trigger("reloadGrid");
		return false;
	});

//]]>
</script>

<form id="formFindPop" name="formFindPop" method="post" action="$!{searchMap.txt2html("context")}/bsc/mon/main/popInsaUserKpiDetailList.vw">
	<input type="hidden"  name="findYear"      value="$!{searchMap.txt2html("findYear")}" />
	<input type="hidden"  name="findMon"       value="$!{searchMap.txt2html("findMon")}" />
	<input type="hidden"  name="findAnalCycle" value="$!{searchMap.txt2html("findAnalCycle")}" />
	<input type="hidden"  name="evuStdId"      value="$!{searchMap.txt2html("evuStdId")}" />
	<input type="hidden"  name="empId"         value="$!{searchMap.txt2html("empId")}" />
	<input type="hidden"  name="itemNo"        value="$!{searchMap.txt2html("itemNo")}" />
	
    <div style="width:850px;height:400px;">
    	<div id="popMetricGrpArea">
    		<h1 class="none">조회</h1>
    		<div style="margin-left:30px;margin-bottom:10px;"><span class="strong">업적목표 : </span>$!{taskNm}</div>
    		<div id="userData" style="margin-left:15px;height:340px;width:450px;">
    			<!-- 데이터그리드 Start -->
    			<div class="blockGridListTable">
    				<table id="popList" summary="조회">
    					<caption class="none">조회</caption>
    					<thead><tr><th></th></tr></thead>
    					<tbody><tr><td></td></tr></tbody>
    				</table>
    				<div id="popPager"></div>                    
    			</div>
    			<!--// 데이터그리드 End -->	
    		</div>
    	</div>
    </div>
</form>
